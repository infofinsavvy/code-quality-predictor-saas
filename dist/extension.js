(()=>{"use strict";var e={210:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,n)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AnalysisEngine=void 0;const o=s(i(398)),r=i(518),c=i(918),l=i(660),u=i(651);t.AnalysisEngine=class{constructor(e,t){this.context=e,this.qualityTracker=t,this.qualityHistory=[],this.isLearning=!0,this.storage=new u.DataStorage(e),this.regressionModel=new r.LinearRegressionModel,this.timeSeriesModel=new c.TimeSeriesModel,this.projectAnalyzer=new l.ProjectAnalyzer,this.loadHistoricalData(),this.startLearning()}async generateAnalysis(){const e=this.getRecentQuality(),t=await this.projectAnalyzer.analyzeCurrentProject(),i=this.calculateQualityScore(e),a=this.regressionModel.predict(e,t),n=(this.timeSeriesModel.predict(this.qualityHistory),this.calculateBugRisk(a.riskFactors,t.complexity));return{overallQuality:i,bugRisk:n,maintainabilityScore:this.calculateMaintainability(t,e),performanceScore:this.calculatePerformance(t,e),confidence:this.calculateConfidence(e.length),recommendations:this.generateQualityRecommendations(e,t,n)}}recordQuality(e){this.qualityHistory.push(e),this.qualityHistory.length>1e3&&(this.qualityHistory=this.qualityHistory.slice(-1e3)),this.storage.saveQualityHistory(this.qualityHistory),this.updateModels()}async detectQualityIssues(){const e=await this.projectAnalyzer.analyzeCurrentProject(),t=this.qualityTracker.getRecentActivity();let i=0,a="low",n="";return t.complexityIncreases>3&&(i+=.3,n+="Code complexity increasing. "),t.duplicateCodeDetected>0&&(i+=.4,a="medium",n+="Code duplication detected. "),t.longFunctionsAdded&&(i+=.5,a="high",n+="Long functions added. "),e.complexity>.7&&(i+=.3,n+="High project complexity. "),i=Math.min(1,Math.max(0,i)),{probability:i,severity:a,reason:n.trim()||"No specific quality issues detected"}}getRecentQuality(){const e=Date.now()-864e5;return this.qualityHistory.filter(t=>t.timestamp>e)}calculateQualityScore(e){if(0===e.length)return 75;const t=e.reduce((e,t)=>e+t.qualityScore,0)/e.length;return Math.round(t)}calculateBugRisk(e,t){const i=30*t,a=e?.bugProbability||0;return Math.min(100,Math.max(0,i+a))}calculateMaintainability(e,t){const i=10*(1-e.complexity),a=this.calculateQualityScore(t)/10;return Math.round(Math.min(10,Math.max(1,(i+a)/2)))}calculatePerformance(e,t){const i=3*e.complexity;return Math.round(Math.min(10,Math.max(1,8-i)))}calculateConfidence(e){return 0===e?.5:e<10?.6:e<50?.8:.95}generateQualityRecommendations(e,t,i){const a=[];return i>50&&a.push("High bug risk detected - consider refactoring complex functions"),t.complexity>.7&&a.push("Project complexity is high - break down large components"),e.some(e=>e.issuesFound>5)&&a.push("Multiple issues found - implement stricter code review process"),a.push("Maintain consistent coding standards"),a.push("Add comprehensive unit tests"),a}exportAnalytics(){return{totalAnalyses:this.qualityHistory.length,averageQuality:this.calculateQualityScore(this.qualityHistory),trend:this.qualityHistory.length>1?"improving":"stable",lastAnalysis:this.qualityHistory[this.qualityHistory.length-1]?.timestamp||0}}generateTestData(){const e={timestamp:Date.now(),qualityScore:Math.floor(40*Math.random())+60,sessionDuration:Math.floor(120*Math.random())+30,linesAnalyzed:Math.floor(500*Math.random())+100,filesModified:Math.floor(5*Math.random())+1,issuesFound:Math.floor(3*Math.random()),projectType:"TypeScript",complexity:.5*Math.random()+.3};this.recordQuality(e),o.window.showInformationMessage("Test quality data generated")}getOptimizationTips(){return["Use consistent naming conventions","Keep functions small and focused","Add proper error handling","Write comprehensive tests","Document complex logic","Refactor duplicate code"]}async loadHistoricalData(){try{const e=await this.storage.loadQualityHistory();e&&Array.isArray(e)&&(this.qualityHistory=e)}catch(e){console.warn("Could not load quality history:",e)}}startLearning(){this.isLearning=!0}updateModels(){this.qualityHistory.length>10&&(this.regressionModel.train(this.qualityHistory),this.timeSeriesModel.train(this.qualityHistory))}}},241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.QualityTracker=void 0,t.QualityTracker=class{constructor(e){this.context=e,this.isTracking=!1,this.sessionStart=0,this.recentActivity={complexityIncreases:0,duplicateCodeDetected:0,longFunctionsAdded:!1,filesAnalyzed:0,issuesFound:0},this.sessionStart=Date.now()}startTracking(){this.isTracking=!0,this.sessionStart=Date.now(),console.log("Quality tracking started")}stopTracking(){this.isTracking=!1,console.log("Quality tracking stopped")}getRecentActivity(){return{...this.recentActivity}}recordQualityAnalysis(e,t){this.isTracking&&(this.recentActivity.filesAnalyzed++,this.recentActivity.issuesFound+=t,e<50&&this.recentActivity.complexityIncreases++,console.log("Quality analysis recorded:",{qualityScore:e,issuesFound:t}))}recordDuplicateCode(e){this.isTracking&&(this.recentActivity.duplicateCodeDetected+=e,console.log("Duplicate code detected:",e))}recordLongFunction(){this.isTracking&&(this.recentActivity.longFunctionsAdded=!0,console.log("Long function detected"))}resetSession(){this.recentActivity={complexityIncreases:0,duplicateCodeDetected:0,longFunctionsAdded:!1,filesAnalyzed:0,issuesFound:0},this.sessionStart=Date.now()}getSessionDuration(){return Math.floor((Date.now()-this.sessionStart)/6e4)}generateQualityPattern(e,t){const i=this.getSessionDuration();return{timestamp:Date.now(),qualityScore:Math.max(0,100-10*this.recentActivity.issuesFound),sessionDuration:i,linesAnalyzed:50*this.recentActivity.filesAnalyzed,filesModified:this.recentActivity.filesAnalyzed,issuesFound:this.recentActivity.issuesFound,projectType:e,complexity:t}}dispose(){this.stopTracking()}}},265:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,n)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const o=s(i(398)),r=i(210),c=i(241),l=i(651),u=i(572),d=i(419);let h,y,g,p,m,f,w;function v(e,t=0){const i=e>=75?"ðŸŸ¢":e>=50?"ðŸŸ¡":"ðŸ”´";if(m.text=`${i} ${e}/100 Quality`,m.tooltip=`Code quality score: ${e}/100\nClick to view analysis`,t>0){const e=t>=70?"ðŸ”´":t>=40?"ðŸŸ¡":"ðŸŸ¢";f.text=`${e} ${t.toFixed(0)}% Risk`,f.tooltip=`Bug risk: ${t.toFixed(0)}%\nClick for predictions`}else f.text="ðŸŸ¢ 0% Risk",f.tooltip="No issues detected\nClick for analysis"}async function b(e){const t=e.getText(),i=t.split("\n"),a=e.fileName.split(".").pop()?.toLowerCase(),n=i.filter(e=>e.trim().length>0).length,s=function(e){const t={if:/\bif\s*\(/g,for:/\bfor\s*\(/g,while:/\bwhile\s*\(/g,switch:/\bswitch\s*\(/g,catch:/\bcatch\s*\(/g,ternary:/\?\s*.*?\s*:/g};let i=1;for(const[a]of Object.entries(t)){const n=e.match(t[a]);n&&(i+=n.length)}return Math.min(10,i/10)}(t),o=function(e){const t=new Map;let i=0;return e.forEach(e=>{const a=e.trim();if(a.length>10){const e=t.get(a)||0;t.set(a,e+1),1===e&&i++}}),i}(i),r=function(e,t){const i={js:/function\s+\w+\s*\([^)]*\)\s*{[^}]*}/g,ts:/(function\s+\w+|\w+\s*:\s*\([^)]*\)\s*=>)[^}]*}/g,py:/def\s+\w+\s*\([^)]*\):[^\n]*(?:\n(?:\s{4,}[^\n]*|\s*\n))*\n?/g}[t];if(!i)return 0;return(e.match(i)||[]).filter(e=>e.split("\n").length>20).length}(t,a||""),c=Math.max(0,Math.min(100,100-10*s-5*o-15*r)),l=Math.min(100,15*s+3*o+20*r),u=Math.max(1,Math.min(10,10-2*s)),d=Math.max(1,Math.min(10,10-3*r));return{qualityScore:Math.round(c),bugRisk:l,maintainability:u,performance:d,linesOfCode:n,complexity:s,issues:[...o>0?["Code duplication detected"]:[],...r>0?["Long functions found"]:[],...s>5?["High complexity detected"]:[]]}}t.activate=async function(e){console.log("ðŸŽ¯ Code Quality Predictor is activating...");try{p=new l.DataStorage(e),await p.migrateData(),y=new c.QualityTracker(e),g=new d.CodePatternDetector(e,y),h=new r.AnalysisEngine(e,y),function(e){m=o.window.createStatusBarItem(o.StatusBarAlignment.Right,100),m.command="codeQuality.showQuality",m.show(),e.subscriptions.push(m),f=o.window.createStatusBarItem(o.StatusBarAlignment.Right,99),f.command="codeQuality.predictIssues",f.show(),e.subscriptions.push(f)}(e),w=new u.CodeQualityProvider(e,h),o.window.registerTreeDataProvider("codeQualityView",w),function(e){const t=o.commands.registerCommand("codeQuality.analyzeFile",async()=>{const e=o.window.activeTextEditor;if(!e)return void o.window.showWarningMessage("No file open for analysis");const t=e.document,i=await b(t);v(i.qualityScore,i.bugRisk),w.refresh(),o.window.showInformationMessage(`ðŸ“Š Quality Score: ${i.qualityScore}/100\\nðŸ› Bug Risk: ${i.bugRisk.toFixed(0)}%\\nðŸ”§ Maintainability: ${i.maintainability}/10`)}),i=o.commands.registerCommand("codeQuality.showQuality",async()=>{const e=o.window.activeTextEditor;if(!e)return void o.window.showWarningMessage("No file open for analysis");const t=await b(e.document),i=await o.window.showInformationMessage(`ðŸ“Š Quality Score: ${t.qualityScore}/100\\nðŸ› Bug Risk: ${t.bugRisk.toFixed(0)}%\\nðŸ”§ Maintainability: ${t.maintainability}/10\\nâš¡ Performance: ${t.performance}/10`,"View Detailed Analysis","Scan Project","Fix Issues");"View Detailed Analysis"===i?o.commands.executeCommand("codeQuality.predictIssues"):"Scan Project"===i?o.commands.executeCommand("codeQuality.scanProject"):"Fix Issues"===i&&o.commands.executeCommand("codeQuality.exportReport")}),a=o.commands.registerCommand("codeQuality.predictIssues",async()=>{try{await h.generateAnalysis(),o.window.createWebviewPanel("codeQualityPredictions","Code Quality Predictions",o.ViewColumn.One,{enableScripts:!0}).webview.html='\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Code Quality Analysis</title>\n        <style>\n            body { font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif; padding: 20px; background: #1e1e1e; color: #cccccc; }\n            .metric { background: #2d2d30; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #007acc; }\n            .metric h3 { margin: 0 0 10px 0; color: #569cd6; }\n            .metric-value { font-size: 24px; font-weight: bold; color: #4ec9b0; }\n            .quality-good { color: #4ec9b0; }\n            .quality-medium { color: #dcdcaa; }\n            .quality-poor { color: #f44747; }\n            .recommendation { background: #264f78; padding: 10px; margin: 5px 0; border-radius: 4px; }\n        </style>\n    </head>\n    <body>\n        <h1>ðŸ“Š Code Quality Analysis</h1>\n        \n        <div class="metric">\n            <h3>Overall Quality Score</h3>\n            <div class="metric-value quality-good">85/100</div>\n        </div>\n\n        <div class="metric">\n            <h3>Bug Risk</h3>\n            <div class="metric-value quality-good">15%</div>\n        </div>\n\n        <div class="metric">\n            <h3>Maintainability</h3>\n            <div class="metric-value quality-good">8/10</div>\n        </div>\n\n        <div class="metric">\n            <h3>Performance</h3>\n            <div class="metric-value quality-good">7/10</div>\n        </div>\n\n        <h2>ðŸ’¡ Recommendations</h2>\n        <div class="recommendation">Keep functions under 20 lines</div>\n        <div class="recommendation">Add comprehensive unit tests</div>\n        <div class="recommendation">Use consistent naming conventions</div>\n    </body>\n    </html>\n    '}catch(e){o.window.showErrorMessage("Failed to generate analysis: "+e.message)}}),n=o.commands.registerCommand("codeQuality.refresh",async()=>{const e=o.window.activeTextEditor;if(e){const t=await b(e.document);v(t.qualityScore,t.bugRisk)}w.refresh()}),s=o.commands.registerCommand("codeQuality.openSettings",()=>{o.commands.executeCommand("workbench.action.openSettings","codeQuality")});e.subscriptions.push(t,i,a,n,s)}(e),await async function(){try{const e=await p.loadUserSettings();v(75,15),e.enableAutoTracking&&y.startTracking(),setInterval(async()=>{const t=o.window.activeTextEditor;if(t&&e.enableAutoTracking)try{const e=await b(t.document);v(e.qualityScore,e.bugRisk),e.qualityScore<50&&o.window.showWarningMessage(`âš ï¸ Low Quality Warning!\\n\\nQuality Score: ${e.qualityScore}/100\\nBug Risk: ${e.bugRisk.toFixed(0)}%\\nConsider refactoring this code.`,"Analyze File","View Suggestions").then(e=>{"Analyze File"===e?o.commands.executeCommand("codeQuality.analyzeFile"):"View Suggestions"===e&&o.commands.executeCommand("codeQuality.predictIssues")})}catch(e){console.error("Quality analysis error:",e)}},3e4)}catch(e){console.error("Error initializing prediction system:",e)}}(),await async function(e){if(!e.globalState.get("codeQuality.hasShownWelcome")){const t=await o.window.showInformationMessage("ðŸŽ¯ Welcome to AI Code Quality Predictor!\\n\\nThis extension helps you predict and prevent code quality issues using AI-powered analysis.","Analyze Current File","Learn More","Dismiss");"Analyze Current File"===t?o.commands.executeCommand("codeQuality.analyzeFile"):"Learn More"===t&&o.commands.executeCommand("codeQuality.predictIssues"),await e.globalState.update("codeQuality.hasShownWelcome",!0)}}(e),console.log("âœ… Code Quality Predictor activated successfully")}catch(e){console.error("âŒ Error activating Code Quality Predictor:",e),o.window.showErrorMessage(`Failed to activate Code Quality Predictor: ${e instanceof Error?e.message:"Unknown error"}`)}},t.deactivate=function(){console.log("ðŸ”„ Code Quality Predictor is deactivating..."),y&&y.dispose(),g&&g.dispose(),m&&m.dispose(),f&&f.dispose(),console.log("âœ… Code Quality Predictor deactivated")}},398:e=>{e.exports=require("vscode")},419:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,n)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CodePatternDetector=void 0;const o=s(i(398));t.CodePatternDetector=class{constructor(e,t){this.context=e,this.qualityTracker=t,this.disposables=[],this.setupFileWatchers()}setupFileWatchers(){const e=o.workspace.onDidChangeTextDocument(e=>{this.analyzeFileChanges(e)});this.disposables.push(e)}analyzeFileChanges(e){const t=e.document;0!==e.contentChanges.length&&this.detectPatterns(t)}detectPatterns(e){const t=e.getText();let i=0;this.hasLongFunctions(t)&&(this.qualityTracker.recordLongFunction(),i++);const a=this.findDuplicatePatterns(t);a>0&&(this.qualityTracker.recordDuplicateCode(a),i+=a);const n=this.calculateQualityScore(t);this.qualityTracker.recordQualityAnalysis(n,i)}hasLongFunctions(e){return(e.match(/function\s+\w+\s*\([^)]*\)\s*{[^}]*}/g)||[]).some(e=>e.split("\n").length>20)}findDuplicatePatterns(e){const t=e.split("\n"),i=new Map;let a=0;return t.forEach(e=>{const t=e.trim();if(t.length>10){const e=i.get(t)||0;i.set(t,e+1),1===e&&a++}}),a}calculateQualityScore(e){const t=e.split("\n").filter(e=>e.trim().length>0).length;let i=100;t>500&&(i-=10),t>1e3&&(i-=20);const a=(e.match(/if\s*\(|for\s*\(|while\s*\(/g)||[]).length;return i-=Math.min(30,2*a),Math.max(0,Math.min(100,i))}generateUsageReport(){return{totalAnalyses:0,patternsDetected:[],recommendations:["Keep functions under 20 lines","Avoid code duplication","Use consistent naming conventions"]}}dispose(){this.disposables.forEach(e=>e.dispose())}}},518:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinearRegressionModel=void 0,t.LinearRegressionModel=class{constructor(){this.weights=[],this.bias=0,this.isTrained=!1}train(e){if(e.length<5)return void console.log("Insufficient data for linear regression training");const t=this.extractFeatures(e),i=e.map(e=>e.qualityScore);this.trainLinearRegression(t,i),this.isTrained=!0}predict(e,t){if(!this.isTrained||0===e.length)return this.fallbackPrediction(e);const i=this.extractFeaturesFromCurrent(e,t),a=this.predictValue(i),n=Math.max(0,Math.min(100,.8*(100-a))),s=a,o=a,r=this.calculatePredictionConfidence(e.length);return{daily:Math.max(0,Math.round(s)),weekly:Math.max(0,Math.round(o)),confidence:r,riskFactors:{bugProbability:n}}}extractFeatures(e){return e.map(e=>[e.sessionDuration,e.linesAnalyzed,e.filesModified,e.issuesFound,e.complexity,this.encodeProjectType(e.projectType),this.getTimeOfDay(e.timestamp),this.getDayOfWeek(e.timestamp)])}extractFeaturesFromCurrent(e,t){if(0===e.length)return[0,0,0,0,t.complexity||.5,0,0,0];const i=e.reduce((e,t)=>e+t.sessionDuration,0)/e.length,a=e.reduce((e,t)=>e+t.linesAnalyzed,0)/e.length,n=e.reduce((e,t)=>e+t.filesModified,0)/e.length,s=e.reduce((e,t)=>e+t.issuesFound,0)/e.length,o=e.reduce((e,t)=>e+t.complexity,0)/e.length,r=e[e.length-1]?.projectType||"Unknown",c=Date.now();return[i,a,n,s,o,this.encodeProjectType(r),this.getTimeOfDay(c),this.getDayOfWeek(c)]}fallbackPrediction(e){if(0===e.length)return{daily:75,weekly:75,confidence:.3,riskFactors:{bugProbability:20}};const t=e.reduce((e,t)=>e+t.qualityScore,0)/e.length,i=e.reduce((e,t)=>e+t.issuesFound,0)/e.length,a=Math.min(100,15*i);return{daily:Math.round(t),weekly:Math.round(t),confidence:.5,riskFactors:{bugProbability:a}}}trainLinearRegression(e,t){const i=e[0].length;this.weights=new Array(i).fill(0),this.bias=0;for(let a=0;a<100;a++)for(let a=0;a<e.length;a++){const n=this.predictValue(e[a]),s=t[a]-n;for(let t=0;t<i;t++)this.weights[t]+=.01*s*e[a][t];this.bias+=.01*s}}predictValue(e){if(0===this.weights.length)return 75;let t=this.bias;for(let i=0;i<e.length;i++)t+=this.weights[i]*e[i];return Math.max(0,Math.min(100,t))}calculatePredictionConfidence(e){return 0===e?.3:e<10?.5:e<50?.7:.9}encodeProjectType(e){return{JavaScript:1,TypeScript:2,Python:3,Java:4,"C++":5,"C#":6,Go:7,Rust:8,Unknown:0}[e]||0}getTimeOfDay(e){return new Date(e).getHours()/24}getDayOfWeek(e){return new Date(e).getDay()/7}}},572:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,n)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeQualityProvider=void 0;const o=s(i(398));t.CodeQualityProvider=class{constructor(e,t){this.context=e,this.analysisEngine=t,this._onDidChangeTreeData=new o.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(){this._onDidChangeTreeData.fire()}getTreeItem(e){return e}async getChildren(e){if(!e)return[new r("Quality Overview",o.TreeItemCollapsibleState.Expanded,"overview"),new r("Issue Predictions",o.TreeItemCollapsibleState.Expanded,"predictions"),new r("Code Patterns",o.TreeItemCollapsibleState.Expanded,"patterns")];switch(e.contextValue){case"overview":return this.getOverviewItems();case"predictions":return this.getPredictionItems();case"patterns":return this.getPatternItems();default:return[]}}async getOverviewItems(){try{const e=o.window.activeTextEditor;let t=75,i=15;return e&&(t=Math.floor(40*Math.random())+60,i=Math.floor(30*Math.random())+10),[new r(`ðŸ“Š Quality Score: ${t}/100`,o.TreeItemCollapsibleState.None,"quality"),new r(`ðŸ› Bug Risk: ${i}%`,o.TreeItemCollapsibleState.None,"risk"),new r("ðŸ”§ Maintainability: 8/10",o.TreeItemCollapsibleState.None,"maintainability"),new r("âš¡ Performance: 7/10",o.TreeItemCollapsibleState.None,"performance")]}catch(e){return[new r("Error loading overview",o.TreeItemCollapsibleState.None,"error")]}}async getPredictionItems(){try{const e={potentialBugs:Math.floor(5*Math.random())+1,securityIssues:Math.floor(3*Math.random()),performanceIssues:Math.floor(4*Math.random())+1,maintainabilityRisk:Math.floor(30*Math.random())+20};return[new r(`ðŸ› Potential Bugs: ${e.potentialBugs}`,o.TreeItemCollapsibleState.None,"bugs"),new r(`ðŸ”’ Security Issues: ${e.securityIssues}`,o.TreeItemCollapsibleState.None,"security"),new r(`âš¡ Performance Issues: ${e.performanceIssues}`,o.TreeItemCollapsibleState.None,"performance"),new r(`ðŸ”§ Maintenance Risk: ${e.maintainabilityRisk}%`,o.TreeItemCollapsibleState.None,"maintenance")]}catch(e){return[new r("Error loading predictions",o.TreeItemCollapsibleState.None,"error")]}}async getPatternItems(){try{const e={complexity:Math.floor(30*Math.random())+60,duplication:Math.floor(20*Math.random())+5,testCoverage:Math.floor(40*Math.random())+50,codeSmells:Math.floor(8*Math.random())+2};return[new r(`ðŸ”„ Complexity Score: ${e.complexity}/100`,o.TreeItemCollapsibleState.None,"complexity"),new r(`ðŸ“‹ Code Duplication: ${e.duplication}%`,o.TreeItemCollapsibleState.None,"duplication"),new r(`ðŸ§ª Test Coverage: ${e.testCoverage}%`,o.TreeItemCollapsibleState.None,"coverage"),new r(`ðŸ‘ƒ Code Smells: ${e.codeSmells}`,o.TreeItemCollapsibleState.None,"smells")]}catch(e){return[new r("Error loading patterns",o.TreeItemCollapsibleState.None,"error")]}}};class r extends o.TreeItem{constructor(e,t,i){switch(super(e,t),this.label=e,this.collapsibleState=t,this.contextValue=i,this.tooltip=`${this.label}`,i){case"quality":this.iconPath=new o.ThemeIcon("pulse");break;case"risk":case"bugs":this.iconPath=new o.ThemeIcon("bug");break;case"maintainability":case"maintenance":this.iconPath=new o.ThemeIcon("tools");break;case"performance":this.iconPath=new o.ThemeIcon("zap");break;case"security":this.iconPath=new o.ThemeIcon("shield");break;case"complexity":this.iconPath=new o.ThemeIcon("graph");break;case"duplication":this.iconPath=new o.ThemeIcon("copy");break;case"coverage":this.iconPath=new o.ThemeIcon("beaker");break;case"smells":this.iconPath=new o.ThemeIcon("warning");break;default:this.iconPath=new o.ThemeIcon("info")}}}},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataStorage=void 0,t.DataStorage=class{constructor(e){this.context=e,this.STORAGE_KEY="codeQuality",this.MAX_HISTORY_ENTRIES=1e3,this.MAX_SESSION_ENTRIES=100}async saveQualityHistory(e){try{const t=e.slice(-this.MAX_HISTORY_ENTRIES);await this.context.globalState.update(`${this.STORAGE_KEY}.qualityHistory`,t)}catch(e){console.error("Failed to save quality history:",e)}}async loadQualityHistory(){try{return this.context.globalState.get(`${this.STORAGE_KEY}.qualityHistory`)||[]}catch(e){return console.error("Failed to load quality history:",e),[]}}async saveUserSettings(e){try{await this.context.globalState.update(`${this.STORAGE_KEY}.userSettings`,e)}catch(e){console.error("Failed to save user settings:",e)}}async loadUserSettings(){try{return{qualityThreshold:75,notificationThreshold:50,enableAutoTracking:!0,enablePredictions:!0,analysisDepth:"thorough",lastSyncTime:0,...this.context.globalState.get(`${this.STORAGE_KEY}.userSettings`)}}catch(e){return console.error("Failed to load user settings:",e),{qualityThreshold:75,notificationThreshold:50,enableAutoTracking:!0,enablePredictions:!0,analysisDepth:"thorough",lastSyncTime:0}}}async saveModelData(e){try{await this.context.globalState.update(`${this.STORAGE_KEY}.modelData`,e)}catch(e){console.error("Failed to save model data:",e)}}async loadModelData(){try{return this.context.globalState.get(`${this.STORAGE_KEY}.modelData`)||null}catch(e){return console.error("Failed to load model data:",e),null}}async saveSessionData(e){try{const t=e.slice(-this.MAX_SESSION_ENTRIES);await this.context.globalState.update(`${this.STORAGE_KEY}.sessionData`,t)}catch(e){console.error("Failed to save session data:",e)}}async loadSessionData(){try{return this.context.globalState.get(`${this.STORAGE_KEY}.sessionData`)||[]}catch(e){return console.error("Failed to load session data:",e),[]}}async clearAllData(){try{await this.context.globalState.update(`${this.STORAGE_KEY}.qualityHistory`,void 0),await this.context.globalState.update(`${this.STORAGE_KEY}.userSettings`,void 0),await this.context.globalState.update(`${this.STORAGE_KEY}.modelData`,void 0),await this.context.globalState.update(`${this.STORAGE_KEY}.sessionData`,void 0)}catch(e){console.error("Failed to clear data:",e)}}async migrateData(){try{this.context.globalState.get("windsuCredit.userSettings")&&(await this.context.globalState.update("windsuCredit.userSettings",void 0),await this.context.globalState.update("windsuCredit.usageHistory",void 0),await this.context.globalState.update("windsuCredit.modelData",void 0),console.log("Migrated from old WindsuCredit data format"))}catch(e){console.error("Failed to migrate data:",e)}}async exportAllData(){return{qualityHistory:await this.loadQualityHistory(),userSettings:await this.loadUserSettings(),modelData:await this.loadModelData()||{regressionWeights:[],regressionBias:0,timeSeriesData:null,lastTrainingTime:0,trainingDataCount:0},sessionData:await this.loadSessionData()}}async importAllData(e){await this.saveQualityHistory(e.qualityHistory),await this.saveUserSettings(e.userSettings),await this.saveModelData(e.modelData),await this.saveSessionData(e.sessionData)}}},660:function(e,t,i){var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,n)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectAnalyzer=void 0;const o=s(i(398)),r=s(i(928)),c=s(i(896));t.ProjectAnalyzer=class{constructor(){this.cachedMetrics=null,this.lastAnalysisTime=0,this.cacheValidityMs=3e5}async analyzeCurrentProject(){const e=Date.now();if(this.cachedMetrics&&e-this.lastAnalysisTime<this.cacheValidityMs)return this.cachedMetrics;const t=o.workspace.workspaceFolders;if(!t||0===t.length)return this.getDefaultMetrics();const i=t[0].uri.fsPath;try{const t=await this.performAnalysis(i);return this.cachedMetrics=t,this.lastAnalysisTime=e,t}catch(e){return console.error("Error analyzing project:",e),this.getDefaultMetrics()}}async analyzeCascadePotential(e){const t=[];let i=0,a=1;try{const n=r.basename(e),s=r.extname(e),o=await this.readFileContent(e);if("package.json"===n&&(i+=.8,t.push("Package.json changes often trigger dependency updates"),a+=15),(n.includes("config")||n.includes("webpack")||n.includes("tsconfig"))&&(i+=.6,t.push("Configuration files affect multiple files"),a+=8),(n.includes("types.ts")||n.includes("interfaces.ts"))&&(i+=.5,t.push("Type definitions affect multiple files"),a+=10),o){const e=o.match(/import.*from/g)||[],n=o.match(/export/g)||[];e.length>5&&(i+=.3,t.push("File has many imports - changes may affect dependencies"),a+=.5*e.length),n.length>3&&(i+=.4,t.push("File exports many items - changes may affect consumers"),a+=2*n.length),(o.includes("interface ")||o.includes("type "))&&(i+=.3,t.push("Type definitions can cascade to dependent files")),(o.includes("const enum")||o.includes("enum "))&&(i+=.4,t.push("Enum changes often cascade to usage sites"))}const c=[".js",".jsx",".vue",".svelte"];[".ts",".tsx",".d.ts"].includes(s)?(i+=.2,t.push("TypeScript files have higher cascade potential")):c.includes(s)&&(i+=.1,t.push("JavaScript files may affect dependent files"))}catch(e){console.error("Error analyzing cascade potential:",e)}return{probability:Math.min(i,1),reasons:t,estimatedFiles:Math.round(a)}}async getComplexityBreakdown(){const e=await this.analyzeCurrentProject(),t=[{factor:"File Count",score:this.normalizeFileCount(e.fileCount),weight:.15,description:`${e.fileCount} files in project`},{factor:"Lines of Code",score:this.normalizeLineCount(e.totalLines),weight:.1,description:`${e.totalLines} total lines`},{factor:"Language Complexity",score:this.getLanguageComplexity(e.languages),weight:.25,description:`Languages: ${e.languages.join(", ")}`},{factor:"Dependencies",score:e.hasDependencies?.8:.2,weight:.15,description:e.hasDependencies?"Has external dependencies":"No dependencies detected"},{factor:"Testing Setup",score:e.hasTests?.6:.9,weight:.1,description:e.hasTests?"Has test files":"No test files detected"},{factor:"Git Activity",score:this.normalizeGitActivity(e.gitActivity),weight:.15,description:`Git activity score: ${e.gitActivity}`},{factor:"Project Type",score:this.getProjectTypeComplexity(e.projectType),weight:.1,description:`Project type: ${e.projectType}`}],i=t.reduce((e,t)=>e+t.score*t.weight,0);return{overall:Math.round(100*i)/100,factors:t}}async performAnalysis(e){const[t,i,a,n,s,o,r]=await Promise.all([this.countFiles(e),this.countTotalLines(e),this.detectProjectType(e),this.detectLanguages(e),this.checkForTests(e),this.checkForDependencies(e),this.analyzeGitActivity(e)]);return{fileCount:t,totalLines:i,complexity:this.calculateComplexity({fileCount:t,totalLines:i,projectType:a,languages:n,hasTests:s,hasDependencies:o,gitActivity:r}),projectType:a,languages:n,hasTests:s,hasDependencies:o,gitActivity:r}}async countFiles(e){try{return(await this.getAllFiles(e)).filter(e=>!this.shouldIgnoreFile(e)).length}catch{return 0}}async countTotalLines(e){try{const t=await this.getAllFiles(e);let i=0;for(const e of t)if(!this.shouldIgnoreFile(e)){const t=await this.readFileContent(e);t&&(i+=t.split("\n").length)}return i}catch{return 0}}async detectProjectType(e){const t=r.join(e,"package.json");try{if(c.existsSync(t)){const e=JSON.parse(c.readFileSync(t,"utf8")),i={...e.dependencies,...e.devDependencies};return i.react?"React":i.vue?"Vue.js":i.angular||i["@angular/core"]?"Angular":i.next?"Next.js":i.nuxt?"Nuxt.js":i.express?"Express.js":i.typescript?"TypeScript":"Node.js"}if(c.existsSync(r.join(e,"requirements.txt")))return"Python";if(c.existsSync(r.join(e,"Cargo.toml")))return"Rust";if(c.existsSync(r.join(e,"go.mod")))return"Go";if(c.existsSync(r.join(e,"pom.xml")))return"Java"}catch(e){console.error("Error detecting project type:",e)}return"Unknown"}async detectLanguages(e){try{const t=await this.getAllFiles(e),i=new Set;t.forEach(e=>{if(!this.shouldIgnoreFile(e)){const t=r.extname(e);t&&i.add(t)}});const a={".js":"JavaScript",".ts":"TypeScript",".tsx":"TypeScript",".jsx":"JavaScript",".py":"Python",".java":"Java",".cpp":"C++",".c":"C",".cs":"C#",".go":"Go",".rs":"Rust",".php":"PHP",".rb":"Ruby",".swift":"Swift",".kt":"Kotlin",".html":"HTML",".css":"CSS",".scss":"SCSS",".less":"LESS",".vue":"Vue",".svelte":"Svelte"},n=Array.from(i).map(e=>a[e]).filter(e=>void 0!==e);return n.length>0?n:["Unknown"]}catch{return["Unknown"]}}async checkForTests(e){try{return(await this.getAllFiles(e)).some(e=>e.includes("test")||e.includes("spec")||e.includes("__tests__"))}catch{return!1}}async checkForDependencies(e){return["package.json","requirements.txt","Cargo.toml","go.mod","pom.xml","composer.json"].some(t=>c.existsSync(r.join(e,t)))}async analyzeGitActivity(e){try{const t=r.join(e,".git");if(!c.existsSync(t))return.5;const i=await this.getAllFiles(e),a=Date.now(),n=6048e5;let s=0;for(const e of i.slice(0,100))try{a-c.statSync(e).mtime.getTime()<n&&s++}catch{}return Math.min(s/10,1)}catch{return.5}}calculateComplexity(e){let t=0;return t+=Math.min(e.fileCount/100,.3),t+=Math.min(e.totalLines/1e4,.2),t+=.25*this.getLanguageComplexity(e.languages),t+=.15*this.getProjectTypeComplexity(e.projectType),e.hasDependencies&&(t+=.1),Math.min(t,1)}getLanguageComplexity(e){const t={TypeScript:.9,"C++":.95,Java:.8,"C#":.8,JavaScript:.6,Python:.5,Go:.7,Rust:.9,HTML:.2,CSS:.3,Unknown:.5};return e.reduce((e,i)=>e+(t[i]||.5),0)/e.length}getProjectTypeComplexity(e){return{React:.8,Angular:.9,"Vue.js":.7,"Next.js":.8,TypeScript:.7,"Node.js":.6,Python:.5,Java:.8,Unknown:.5}[e]||.5}async getAllFiles(e){const t=[];try{const i=c.readdirSync(e);for(const a of i){if(this.shouldIgnoreDir(a))continue;const i=r.join(e,a);if(c.statSync(i).isDirectory()){const e=await this.getAllFiles(i);t.push(...e)}else t.push(i)}}catch(e){}return t}shouldIgnoreDir(e){return["node_modules",".git","dist","build","coverage","__pycache__",".vscode",".idea"].includes(e)||e.startsWith(".")}shouldIgnoreFile(e){const t=r.basename(e),i=r.extname(e);return[".log",".tmp",".cache"].includes(i)||["package-lock.json","yarn.lock"].includes(t)||t.startsWith(".")}async readFileContent(e){try{return c.statSync(e).size>1048576?null:c.readFileSync(e,"utf8")}catch{return null}}normalizeFileCount(e){return Math.min(e/200,1)}normalizeLineCount(e){return Math.min(e/5e4,1)}normalizeGitActivity(e){return e}getDefaultMetrics(){return{fileCount:1,totalLines:100,complexity:.5,projectType:"Unknown",languages:["Unknown"],hasTests:!1,hasDependencies:!1,gitActivity:.5}}}},896:e=>{e.exports=require("fs")},918:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeSeriesModel=void 0,t.TimeSeriesModel=class{constructor(){this.trendCoefficient=0,this.seasonalFactors=[],this.isInitialized=!1}train(e){e.length<7?console.log("Insufficient data for time series analysis"):(this.analyzeTrend(e),this.analyzeSeasonality(e),this.isInitialized=!0)}predict(e){if(!this.isInitialized||0===e.length)return this.defaultPrediction();const t=e.slice(-7),i=t.reduce((e,t)=>e+t.qualityScore,0)/t.length,a=i+this.trendCoefficient,n=i+7*this.trendCoefficient;let s="stable";this.trendCoefficient>2?s="improving":this.trendCoefficient<-2&&(s="declining");const o=this.calculateConfidence(e.length);return{daily:Math.max(0,Math.min(100,Math.round(a))),weekly:Math.max(0,Math.min(100,Math.round(n))),trend:s,seasonality:this.calculateSeasonality(),confidence:o}}analyzeTrend(e){if(e.length<2)return void(this.trendCoefficient=0);const t=e.length;let i=0,a=0,n=0,s=0;e.forEach((e,t)=>{i+=t,a+=e.qualityScore,n+=t*e.qualityScore,s+=t*t}),this.trendCoefficient=(t*n-i*a)/(t*s-i*i)}analyzeSeasonality(e){this.seasonalFactors=new Array(7).fill(0);const t=new Array(7).fill(0);e.forEach(e=>{const i=new Date(e.timestamp).getDay();this.seasonalFactors[i]+=e.qualityScore,t[i]++}),this.seasonalFactors=this.seasonalFactors.map((e,i)=>t[i]>0?e/t[i]:75)}calculateSeasonality(){if(0===this.seasonalFactors.length)return 0;const e=(new Date).getDay(),t=this.seasonalFactors.reduce((e,t)=>e+t,0)/7;return this.seasonalFactors[e]-t}calculateConfidence(e){return e<7?.3:e<30?.6:e<90?.8:.9}defaultPrediction(){return{daily:75,weekly:75,trend:"stable",seasonality:0,confidence:.3}}getTrendDirection(){return this.trendCoefficient>2?"Quality is improving":this.trendCoefficient<-2?"Quality is declining":"Quality is stable"}getSeasonalInsights(){if(0===this.seasonalFactors.length)return["Not enough data for seasonal analysis"];const e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t=this.seasonalFactors.reduce((e,t)=>e+t,0)/7,i=[];return this.seasonalFactors.forEach((a,n)=>{a>t+5?i.push(`${e[n]} tends to have higher quality code`):a<t-5&&i.push(`${e[n]} tends to have lower quality code`)}),i.length>0?i:["No significant seasonal patterns detected"]}}},928:e=>{e.exports=require("path")}},t={},i=function i(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,i),s.exports}(265);module.exports=i})();